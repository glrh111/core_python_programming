# 10 服务化

+ 为什么需要服务化
+ 使用Thrift对文件托管进行服务改造
+ 介绍豆瓣服务化实践：PIDL

## 为什么需要服务化

1. 代码重复率高
2. 运维成本高
3. 可靠性很差
4. 团队协作差

解决办法如下：

业务拆分，业务隔离，业务解耦，明确业务划分，减少重复开发

## RPC框架

Remote Procedure Call 远程过程调用，允许进程间通信。

+ thrift Facebook开源的
+ Avro Hadoop 的子项目
+ gRPC Google基于HTTP/2 和 Protobuf 的通用框架

优势：
+ 资源粒度：
+ 流量消耗：RPC传输二进制，消耗流量更少。

> 对接异构第三方服务时，通常选用HTTP/Restful 等公有协议；内部调用时，一般选择性能更高的二进制私有协议。

## 服务化带来的问题